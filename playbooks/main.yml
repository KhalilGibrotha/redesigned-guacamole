---
# Main Orchestrator Playbook
# Coordinates all the modular playbooks for complete Confluence automation

- name: "Confluence Documentation Automation - Orchestrator"
  hosts: localhost
  connection: local
  gather_facts: true
  vars_files:
    - vars/vars.yml

  tasks:
    - name: "ğŸš€ Starting Confluence Documentation Automation"
      ansible.builtin.debug:
        msg: |
          ================================================
          ğŸ“š Confluence Documentation Automation
          ================================================
          Project: {{ project_name }}
          Environment: {{ env }}
          Confluence URL: {{ confluence_url }}
          Space: {{ confluence_space }}
          ================================================

    - name: "ğŸ“‹ Step 1: Environment Validation"
      ansible.builtin.include: playbooks/01-validate-environment.yml

    - name: "ğŸ”„ Step 2: Template Conversion"
      ansible.builtin.include: playbooks/02-convert-templates.yml

    - name: "ğŸ“„ Step 3: HTML Conversion"
      ansible.builtin.include: playbooks/03-convert-html.yml

    - name: "â˜ï¸  Step 4: Confluence Publishing"
      ansible.builtin.include: playbooks/04-publish-confluence.yml

    - name: "âœ… Automation Complete"
      ansible.builtin.debug:
        msg: |
          ================================================
          ğŸ‰ Confluence Documentation Automation Complete!
          ================================================
          
          ğŸ“Š Summary:
          âœ… Environment validated
          âœ… Templates converted to markdown
          âœ… Markdown converted to HTML
          âœ… Content published to Confluence
          
          ğŸ”— Access your documentation:
          {{ confluence_url }}/spaces/{{ confluence_space }}
          
          ğŸ“ Temporary files available in: ~/tmp/
          ğŸ§¹ Clean up with: make clean-conversion
          ================================================
