---
# Main Orchestrator Playbook
# Coordinates all the modular playbooks for complete Confluence automation

- name: "🚀 Confluence Documentation Automation - Start"
  hosts: localhost
  connection: local
  gather_facts: true
  vars_files:
    - ../vars/vars.yml

  tasks:
    - name: "🚀 Starting Confluence Documentation Automation"
      ansible.builtin.debug:
        msg: |
          ================================================
          📚 Confluence Documentation Automation
          ================================================
          Project: {{ project_name }}
          Environment: {{ env }}
          Confluence URL: {{ confluence_url }}
          Space: {{ confluence_space }}
          ================================================

# Environment Validation
- import_playbook: 01-validate-environment.yml

# Template Conversion
- import_playbook: 02-convert-templates.yml

# HTML Conversion
- import_playbook: 03-convert-html.yml

# Confluence Publishing
- import_playbook: 04-publish-confluence.yml

- name: "✅ Confluence Documentation Automation - Complete"
  hosts: localhost
  connection: local
  gather_facts: false
  vars_files:
    - ../vars/vars.yml

  tasks:
    - name: "✅ Automation Complete"
      ansible.builtin.debug:
        msg: |
          ================================================
          🎉 Confluence Documentation Automation Complete!
          ================================================

          📊 Summary:
          ✅ Environment validated
          ✅ Templates converted to markdown
          ✅ Markdown converted to HTML
          ✅ Content published to Confluence

          🔗 Access your documentation:
          {{ confluence_url }}/spaces/{{ confluence_space }}

          📁 Temporary files available in: ~/tmp/
          🧹 Clean up with: make clean-conversion
          ================================================
